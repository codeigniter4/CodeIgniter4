<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>URI Routing &mdash; CodeIgniter 4.5.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/citheme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/citheme_dark.css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/js/citheme.js"></script>
        <script src="../_static/js/carbon.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Controllers" href="controllers.html" />
    <link rel="prev" title="Controllers and Routing" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/ci-logo-text.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Welcome to CodeIgniter4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html">Welcome to CodeIgniter4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/requirements.html">Server Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/credits.html">Credits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/psr.html">PSR Compliance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html">License Agreement</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_composer.html">Composer Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_manual.html">Manual Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/running.html">Running Your App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/deployment.html">Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelogs/index.html">Change Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/upgrading.html">Upgrading From a Previous Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/repositories.html">CodeIgniter Repositories</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Build Your First Application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/static_pages.html">Static Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/news_section.html">News Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/create_news_items.html">Create News Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/conclusion.html">Conclusion</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">CodeIgniter4 Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/structure.html">Application Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/mvc.html">Models, Views, and Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/autoloader.html">Autoloading Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/factories.html">Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/http.html">Working with HTTP Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/security.html">Security Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/goals.html">Design and Architectural Goals</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">General Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/urls.html">CodeIgniter URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/helpers.html">Helper Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/common_functions.html">Global Functions and Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/logging.html">Logging Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/errors.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/caching.html">Web Page Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/ajax.html">AJAX Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/modules.html">Code Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/managing_apps.html">Managing your Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/environments.html">Handling Multiple Environments</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Controllers and Routing</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">URI Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers.html">Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html">Controller Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="message.html">HTTP Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="request.html">Request Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="incomingrequest.html">IncomingRequest Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="content_negotiation.html">Content Negotiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="methodspoofing.html">HTTP Method Spoofing</a></li>
<li class="toctree-l2"><a class="reference internal" href="restful.html">RESTful Resource Handling</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../outgoing/index.html">Building Responses</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/views.html">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_renderer.html">View Renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_layouts.html">View Layouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_cells.html">View Cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_parser.html">View Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_decorators.html">View Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/table.html">HTML Table Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/response.html">HTTP Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/api_responses.html">API Response Trait</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/csp.html">Content Security Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/localization.html">Localization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/alternative_php.html">Alternate PHP Syntax for View Files</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">Working with Databases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/examples.html">Quick Start: Usage Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/configuration.html">Database Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/connecting.html">Connecting to a Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/queries.html">Running Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/results.html">Generating Query Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/helpers.html">Query Helper Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/query_builder.html">Query Builder Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/transactions.html">Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/metadata.html">Getting Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/call_function.html">Custom Function Calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/events.html">Database Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/utilities.html">Database Utilities</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">Modeling Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../models/model.html">Using CodeIgniter's Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/entities.html">Using Entity Classes</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dbmgmt/index.html">Managing Databases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/forge.html">Database Forge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/migration.html">Database Migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/seeds.html">Database Seeding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/db_commands.html">Database Commands</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Library Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../libraries/caching.html">Caching Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/cookies.html">Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/cors.html">Cross-Origin Resource Sharing (CORS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/curlrequest.html">CURLRequest Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/email.html">Email Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encryption.html">Encryption Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/files.html">Working with Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/file_collections.html">File Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/honeypot.html">Honeypot Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/images.html">Image Manipulation Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/pagination.html">Pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/publisher.html">Publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/sessions.html">Session Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/throttler.html">Throttler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/time.html">Times and Dates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/typography.html">Typography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uploaded_files.html">Working with Uploaded Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html">Working with URIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/user_agent.html">User Agent Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/validation.html">Validation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Helpers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../helpers/array_helper.html">Array Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/cookie_helper.html">Cookie Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/date_helper.html">Date Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/filesystem_helper.html">Filesystem Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/form_helper.html">Form Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/html_helper.html">HTML Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/inflector_helper.html">Inflector Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/number_helper.html">Number Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/security_helper.html">Security Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/test_helper.html">Test Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/text_helper.html">Text Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/url_helper.html">URL Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/xml_helper.html">XML Helper</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../testing/overview.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/fabricator.html">Generating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/controllers.html">Controller Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/feature.html">HTTP Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/response.html">Testing Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/cli.html">Testing CLI Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/mocking.html">Mocking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/benchmark.html">Benchmarking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/debugging.html">Debugging Your Application</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_overview.html">CLI Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_controllers.html">Running Controllers via CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/spark_commands.html">Spark Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_commands.html">Creating Spark Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_generators.html">CLI Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_library.html">CLI Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_request.html">CLIRequest Class</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">Extending CodeIgniter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extending/core_classes.html">Creating Core System Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/common.html">Replacing Common Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/basecontroller.html">Extending the Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/authentication.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/composer_packages.html">Creating Composer Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/contributing.html">Contributing to CodeIgniter</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/official_packages.html">Official Packages</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CodeIgniter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
<a class="btn btn-neutral float-right" href="https://github.com/codeigniter4/CodeIgniter4/edit/develop/user_guide_src/source/incoming/routing.rst">Edit this page</a>

          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Controllers and Routing</a></li>
      <li class="breadcrumb-item active">URI Routing</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="uri-routing">
<h1>URI Routing<a class="headerlink" href="#uri-routing" title="Permalink to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#what-is-uri-routing" id="id17">What is URI Routing?</a></p></li>
<li><p><a class="reference internal" href="#setting-routing-rules" id="id18">Setting Routing Rules</a></p>
<ul>
<li><p><a class="reference internal" href="#examples" id="id19">Examples</a></p></li>
<li><p><a class="reference internal" href="#http-verb-routes" id="id20">HTTP verb Routes</a></p></li>
<li><p><a class="reference internal" href="#specifying-route-handlers" id="id21">Specifying Route Handlers</a></p>
<ul>
<li><p><a class="reference internal" href="#controller-s-namespace" id="id22">Controller’s Namespace</a></p></li>
<li><p><a class="reference internal" href="#array-callable-syntax" id="id23">Array Callable Syntax</a></p></li>
<li><p><a class="reference internal" href="#using-closures" id="id24">Using Closures</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#specifying-route-paths" id="id25">Specifying Route Paths</a></p>
<ul>
<li><p><a class="reference internal" href="#placeholders" id="id26">Placeholders</a></p></li>
<li><p><a class="reference internal" href="#custom-placeholders" id="id27">Custom Placeholders</a></p></li>
<li><p><a class="reference internal" href="#regular-expressions" id="id28">Regular Expressions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#view-routes" id="id29">View Routes</a></p></li>
<li><p><a class="reference internal" href="#redirecting-routes" id="id30">Redirecting Routes</a></p></li>
<li><p><a class="reference internal" href="#environment-restrictions" id="id31">Environment Restrictions</a></p></li>
<li><p><a class="reference internal" href="#routes-with-any-http-verbs" id="id32">Routes with any HTTP verbs</a></p></li>
<li><p><a class="reference internal" href="#mapping-multiple-routes" id="id33">Mapping Multiple Routes</a></p></li>
<li><p><a class="reference internal" href="#command-line-only-routes" id="id34">Command-Line Only Routes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#global-options" id="id35">Global Options</a></p>
<ul>
<li><p><a class="reference internal" href="#applying-filters" id="id36">Applying Filters</a></p>
<ul>
<li><p><a class="reference internal" href="#alias-filter" id="id37">Alias Filter</a></p></li>
<li><p><a class="reference internal" href="#classname-filter" id="id38">Classname Filter</a></p></li>
<li><p><a class="reference internal" href="#multiple-filters" id="id39">Multiple Filters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#assigning-namespace" id="id40">Assigning Namespace</a></p></li>
<li><p><a class="reference internal" href="#limit-to-hostname" id="id41">Limit to Hostname</a></p></li>
<li><p><a class="reference internal" href="#limit-to-subdomains" id="id42">Limit to Subdomains</a></p></li>
<li><p><a class="reference internal" href="#offsetting-the-matched-parameters" id="id43">Offsetting the Matched Parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#reverse-routing" id="id44">Reverse Routing</a></p></li>
<li><p><a class="reference internal" href="#named-routes" id="id45">Named Routes</a></p></li>
<li><p><a class="reference internal" href="#grouping-routes" id="id46">Grouping Routes</a></p>
<ul>
<li><p><a class="reference internal" href="#setting-namespace" id="id47">Setting Namespace</a></p></li>
<li><p><a class="reference internal" href="#setting-filters" id="id48">Setting Filters</a></p></li>
<li><p><a class="reference internal" href="#setting-other-options" id="id49">Setting Other Options</a></p></li>
<li><p><a class="reference internal" href="#nesting-groups" id="id50">Nesting Groups</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#route-priority" id="id51">Route Priority</a></p>
<ul>
<li><p><a class="reference internal" href="#changing-route-priority" id="id52">Changing Route Priority</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#routes-configuration-options" id="id53">Routes Configuration Options</a></p>
<ul>
<li><p><a class="reference internal" href="#default-namespace" id="id54">Default Namespace</a></p></li>
<li><p><a class="reference internal" href="#default-method" id="id55">Default Method</a></p></li>
<li><p><a class="reference internal" href="#translate-uri-dashes" id="id56">Translate URI Dashes</a></p></li>
<li><p><a class="reference internal" href="#use-defined-routes-only" id="id57">Use Defined Routes Only</a></p></li>
<li><p><a class="reference internal" href="#override" id="id58">404 Override</a></p></li>
<li><p><a class="reference internal" href="#route-processing-by-priority" id="id59">Route Processing by Priority</a></p></li>
<li><p><a class="reference internal" href="#multiple-uri-segments-as-one-parameter" id="id60">Multiple URI Segments as One Parameter</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#auto-routing-improved" id="id61">Auto Routing (Improved)</a></p>
<ul>
<li><p><a class="reference internal" href="#enable-auto-routing" id="id62">Enable Auto Routing</a></p></li>
<li><p><a class="reference internal" href="#uri-segments" id="id63">URI Segments</a></p></li>
<li><p><a class="reference internal" href="#configuration-options" id="id64">Configuration Options</a></p>
<ul>
<li><p><a class="reference internal" href="#default-controller" id="id65">Default Controller</a></p></li>
<li><p><a class="reference internal" href="#routing-auto-routing-improved-default-method" id="id66">Default Method</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-routing" id="id67">Module Routing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#auto-routing-legacy" id="id68">Auto Routing (Legacy)</a></p>
<ul>
<li><p><a class="reference internal" href="#enable-auto-routing-legacy" id="id69">Enable Auto Routing (Legacy)</a></p></li>
<li><p><a class="reference internal" href="#uri-segments-legacy" id="id70">URI Segments (Legacy)</a></p></li>
<li><p><a class="reference internal" href="#configuration-options-legacy" id="id71">Configuration Options (Legacy)</a></p>
<ul>
<li><p><a class="reference internal" href="#default-controller-legacy" id="id72">Default Controller (Legacy)</a></p></li>
<li><p><a class="reference internal" href="#default-method-legacy" id="id73">Default Method (Legacy)</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#confirming-routes" id="id74">Confirming Routes</a></p>
<ul>
<li><p><a class="reference internal" href="#spark-routes" id="id75">spark routes</a></p>
<ul>
<li><p><a class="reference internal" href="#id15" id="id76">Auto Routing (Improved)</a></p></li>
<li><p><a class="reference internal" href="#id16" id="id77">Auto Routing (Legacy)</a></p></li>
<li><p><a class="reference internal" href="#sort-by-handler" id="id78">Sort by Handler</a></p></li>
<li><p><a class="reference internal" href="#specify-host" id="id79">Specify Host</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#getting-routing-information" id="id80">Getting Routing Information</a></p>
<ul>
<li><p><a class="reference internal" href="#retrieving-the-current-controller-method-names" id="id81">Retrieving the Current Controller/Method Names</a></p></li>
<li><p><a class="reference internal" href="#getting-active-filters-for-the-current-route" id="id82">Getting Active Filters for the Current Route</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="what-is-uri-routing">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">What is URI Routing?</a><a class="headerlink" href="#what-is-uri-routing" title="Permalink to this heading"></a></h2>
<p>URI Routing associates a URI with a controller’s method.</p>
<p>CodeIgniter has two kinds of routing. One is <strong>Defined Route Routing</strong>, and the other is <strong>Auto Routing</strong>.
With Defined Route Routing, you can define routes manually. It allows flexible URL.
Auto Routing automatically routes HTTP requests based on conventions and execute the corresponding controller methods. There is no need to define routes manually.</p>
<p>First, let’s look at Defined Route Routing. If you want to use Auto Routing, see <a class="reference internal" href="#auto-routing-improved"><span class="std std-ref">Auto Routing (Improved)</span></a>.</p>
</section>
<section id="setting-routing-rules">
<span id="defined-route-routing"></span><h2><a class="toc-backref" href="#id18" role="doc-backlink">Setting Routing Rules</a><a class="headerlink" href="#setting-routing-rules" title="Permalink to this heading"></a></h2>
<p>Routing rules are defined in the <strong>app/Config/Routes.php</strong> file. In it you’ll see that
it creates an instance of the RouteCollection class (<code class="docutils literal notranslate"><span class="pre">$routes</span></code>) that permits you to specify your own routing criteria.
Routes can be specified using placeholders or Regular Expressions.</p>
<p>When you specify a route, you choose a method to corresponding to HTTP verbs (request method).
If you expect a GET request, you use the <code class="docutils literal notranslate"><span class="pre">get()</span></code> method:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;Home::index&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>A route takes the <strong>Route Path</strong> (URI path relative to the BaseURL. <code class="docutils literal notranslate"><span class="pre">/</span></code>) on the left,
and maps it to the <strong>Route Handler</strong> (controller and method <code class="docutils literal notranslate"><span class="pre">Home::index</span></code>) on the right,
along with any parameters that should be passed to the controller.</p>
<p>The controller and method should
be listed in the same way that you would use a static method, by separating the class
and its method with a double-colon, like <code class="docutils literal notranslate"><span class="pre">Users::list</span></code>.</p>
<p>If that method requires parameters to be
passed to it, then they would be listed after the method name, separated by forward-slashes:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Calls $Users-&gt;list()</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;Users::list&#39;</span><span class="p">);</span>

<span class="c1">// Calls $Users-&gt;list(1, 23)</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users/1/23&#39;</span><span class="p">,</span> <span class="s1">&#39;Users::list/1/23&#39;</span><span class="p">);</span>
</pre></div>
</div>
<section id="examples">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Examples</a><a class="headerlink" href="#examples" title="Permalink to this heading"></a></h3>
<p>Here are a few basic routing examples.</p>
<p>A URL containing the word <strong>journals</strong> in the first segment will be mapped to the <code class="docutils literal notranslate"><span class="pre">\App\Controllers\Blogs</span></code> class,
and the <a class="reference internal" href="#routing-default-method"><span class="std std-ref">default method</span></a>, which is usually <code class="docutils literal notranslate"><span class="pre">index()</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;journals&#39;</span><span class="p">,</span> <span class="s1">&#39;Blogs&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>A URL containing the segments <strong>blog/joe</strong> will be mapped to the <code class="docutils literal notranslate"><span class="pre">\App\Controllers\Blogs</span></code> class and the <code class="docutils literal notranslate"><span class="pre">users()</span></code> method.
The ID will be set to <code class="docutils literal notranslate"><span class="pre">34</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;blog/joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Blogs::users/34&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>A URL with <strong>product</strong> as the first segment, and anything in the second will be mapped to the <code class="docutils literal notranslate"><span class="pre">\App\Controllers\Catalog</span></code> class
and the <code class="docutils literal notranslate"><span class="pre">productLookup()</span></code> method:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:segment)&#39;</span><span class="p">,</span> <span class="s1">&#39;Catalog::productLookup&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>A URL with <strong>product</strong> as the first segment, and a number in the second will be mapped to the <code class="docutils literal notranslate"><span class="pre">\App\Controllers\Catalog</span></code> class
and the <code class="docutils literal notranslate"><span class="pre">productLookupByID()</span></code> method passing in the match as a variable to the method:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;Catalog::productLookupByID/$1&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="http-verb-routes">
<span id="routing-http-verb-routes"></span><h3><a class="toc-backref" href="#id20" role="doc-backlink">HTTP verb Routes</a><a class="headerlink" href="#http-verb-routes" title="Permalink to this heading"></a></h3>
<p>You can use any standard HTTP verb (GET, POST, PUT, DELETE, OPTIONS, etc):</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="s1">&#39;Product::feature&#39;</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">put</span><span class="p">(</span><span class="s1">&#39;products/1&#39;</span><span class="p">,</span> <span class="s1">&#39;Product::feature&#39;</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;products/1&#39;</span><span class="p">,</span> <span class="s1">&#39;Product::feature&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>You can supply multiple verbs that a route should match by passing them in as an array to the <code class="docutils literal notranslate"><span class="pre">match()</span></code> method:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">match</span><span class="p">([</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT&#39;</span><span class="p">],</span> <span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="s1">&#39;Product::feature&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="specifying-route-handlers">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Specifying Route Handlers</a><a class="headerlink" href="#specifying-route-handlers" title="Permalink to this heading"></a></h3>
<section id="controller-s-namespace">
<span id="controllers-namespace"></span><h4><a class="toc-backref" href="#id22" role="doc-backlink">Controller’s Namespace</a><a class="headerlink" href="#controller-s-namespace" title="Permalink to this heading"></a></h4>
<p>When you specify a controller and method name as a string, if a controller is
written without a leading <code class="docutils literal notranslate"><span class="pre">\</span></code>, the <a class="reference internal" href="#routing-default-namespace"><span class="std std-ref">Default Namespace</span></a> will be
prepended:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Routes to \App\Controllers\Api\Users::update()</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;api/users&#39;</span><span class="p">,</span> <span class="s1">&#39;Api\Users::update&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>If you put <code class="docutils literal notranslate"><span class="pre">\</span></code> at the beginning, it is treated as a fully qualified class name:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Routes to \Acme\Blog\Controllers\Home::list()</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="s1">&#39;\Acme\Blog\Controllers\Home::list&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>You can also specify the namespace with the <code class="docutils literal notranslate"><span class="pre">namespace</span></code> option:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Routes to \Admin\Users::index()</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;admin/users&#39;</span><span class="p">,</span> <span class="s1">&#39;Users::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;namespace&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Admin&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#assigning-namespace"><span class="std std-ref">Assigning Namespace</span></a> for details.</p>
</section>
<section id="array-callable-syntax">
<h4><a class="toc-backref" href="#id23" role="doc-backlink">Array Callable Syntax</a><a class="headerlink" href="#array-callable-syntax" title="Permalink to this heading"></a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.2.0.</span></p>
</div>
<p>Since v4.2.0, you can use array callable syntax to specify the controller:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">\App\Controllers\Home</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Or using <code class="docutils literal notranslate"><span class="pre">use</span></code> keyword:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">App\Controllers\Home</span><span class="p">;</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">Home</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>If you forget to add <code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">App\Controllers\Home;</span></code>, the controller classname is
interpreted as <code class="docutils literal notranslate"><span class="pre">\Home</span></code>, not <code class="docutils literal notranslate"><span class="pre">App\Controllers\Home</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you use Array Callable Syntax, the classname is always interpreted
as a fully qualified classname. So <a class="reference internal" href="#routing-default-namespace"><span class="std std-ref">Default Namespace</span></a> and
<a class="reference internal" href="#assigning-namespace"><span class="std std-ref">namespace option</span></a> have no effect.</p>
</div>
<section id="array-callable-syntax-and-placeholders">
<h5>Array Callable Syntax and Placeholders<a class="headerlink" href="#array-callable-syntax-and-placeholders" title="Permalink to this heading"></a></h5>
<p>If there are placeholders, it will automatically set the parameters in the specified order:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">App\Controllers\Product</span><span class="p">;</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:num)/(:num)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">Product</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">]);</span>

<span class="c1">// The above code is the same as the following:</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:num)/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;Product::index/$1/$2&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>But the auto-configured parameters may not be correct if you use regular expressions in routes.
In such a case, you can specify the parameters manually:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">App\Controllers\Product</span><span class="p">;</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:num)/(:num)&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="nx">Product</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="s1">&#39;$2/$1&#39;</span><span class="p">]);</span>

<span class="c1">// The above code is the same as the following:</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:num)/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;Product::index/$2/$1&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="using-closures">
<h4><a class="toc-backref" href="#id24" role="doc-backlink">Using Closures</a><a class="headerlink" href="#using-closures" title="Permalink to this heading"></a></h4>
<p>You can use an anonymous function, or Closure, as the destination that a route maps to. This function will be
executed when the user visits that URI. This is handy for quickly executing small tasks, or even just showing
a simple view:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">App\Libraries\RSSFeeder</span><span class="p">;</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;feed&#39;</span><span class="p">,</span> <span class="k">static</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nv">$rss</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RSSFeeder</span><span class="p">();</span>

    <span class="k">return</span> <span class="nv">$rss</span><span class="o">-&gt;</span><span class="na">feed</span><span class="p">(</span><span class="s1">&#39;general&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
</section>
<section id="specifying-route-paths">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Specifying Route Paths</a><a class="headerlink" href="#specifying-route-paths" title="Permalink to this heading"></a></h3>
<section id="placeholders">
<h4><a class="toc-backref" href="#id26" role="doc-backlink">Placeholders</a><a class="headerlink" href="#placeholders" title="Permalink to this heading"></a></h4>
<p>A typical route might look something like this:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;Catalog::productLookup&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>In a route, the first parameter contains the URI to be matched, while the second parameter
contains the destination it should be routed to. In the above example, if the literal word
“product” is found in the first segment of the URL path, and a number is found in the second segment,
the <code class="docutils literal notranslate"><span class="pre">Catalog</span></code> class and the <code class="docutils literal notranslate"><span class="pre">productLookup</span></code> method are used instead.</p>
<p>Placeholders are simply strings that represent a Regular Expression pattern. During the routing
process, these placeholders are replaced with the value of the Regular Expression. They are primarily
used for readability.</p>
<p>The following placeholders are available for you to use in your routes:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Placeholders</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(:any)</p></td>
<td><p>will match all characters from that point to the end of the URI. This may include multiple URI segments.</p></td>
</tr>
<tr class="row-odd"><td><p>(:segment)</p></td>
<td><p>will match any character except for a forward slash (<code class="docutils literal notranslate"><span class="pre">/</span></code>) restricting the result to a single segment.</p></td>
</tr>
<tr class="row-even"><td><p>(:num)</p></td>
<td><p>will match any integer.</p></td>
</tr>
<tr class="row-odd"><td><p>(:alpha)</p></td>
<td><p>will match any string of alphabetic characters</p></td>
</tr>
<tr class="row-even"><td><p>(:alphanum)</p></td>
<td><p>will match any string of alphabetic characters or integers, or any combination of the two.</p></td>
</tr>
<tr class="row-odd"><td><p>(:hash)</p></td>
<td><p>is the same as <code class="docutils literal notranslate"><span class="pre">(:segment)</span></code>, but can be used to easily see which routes use hashed ids.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">{locale}</span></code> cannot be used as a placeholder or other part of the route, as it is reserved for use
in <a class="reference internal" href="../outgoing/localization.html"><span class="doc">localization</span></a>.</p>
</div>
<section id="the-behavior-of-any">
<span id="routing-placeholder-any"></span><h5>The Behavior of (:any)<a class="headerlink" href="#the-behavior-of-any" title="Permalink to this heading"></a></h5>
<p>Note that a single <code class="docutils literal notranslate"><span class="pre">(:any)</span></code> will match multiple segments in the URL if present.</p>
<p>For example the route:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:any)&#39;</span><span class="p">,</span> <span class="s1">&#39;Catalog::productLookup/$1&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>will match <strong>product/123</strong>, <strong>product/123/456</strong>, <strong>product/123/456/789</strong> and so on.</p>
<p>By default, in the above example, if the <code class="docutils literal notranslate"><span class="pre">$1</span></code> placeholder contains a slash
(<code class="docutils literal notranslate"><span class="pre">/</span></code>), it will still be split into multiple parameters when passed to
<code class="docutils literal notranslate"><span class="pre">Catalog::productLookup()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since v4.5.0, you can change the behavior with the config option.
See <a class="reference internal" href="#multiple-uri-segments-as-one-parameter"><span class="std std-ref">Multiple URI Segments as One Parameter</span></a> for details.</p>
</div>
<p>The implementation in the
Controller should take into account the maximum parameters:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Controllers</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Catalog</span> <span class="k">extends</span> <span class="nx">BaseController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">productLookup</span><span class="p">(</span><span class="nv">$seg1</span> <span class="o">=</span> <span class="k">false</span><span class="p">,</span> <span class="nv">$seg2</span> <span class="o">=</span> <span class="k">false</span><span class="p">,</span> <span class="nv">$seg3</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$seg1</span><span class="p">;</span> <span class="c1">// Will be 123 in all examples</span>
        <span class="k">echo</span> <span class="nv">$seg2</span><span class="p">;</span> <span class="c1">// false in first, 456 in second and third example</span>
        <span class="k">echo</span> <span class="nv">$seg3</span><span class="p">;</span> <span class="c1">// false in first and second, 789 in third</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Or you can use <a class="reference external" href="https://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list">variable-length argument lists</a>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Controllers</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Catalog</span> <span class="k">extends</span> <span class="nx">BaseController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">productLookup</span><span class="p">(</span><span class="o">...</span><span class="nv">$params</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">??</span> <span class="k">null</span><span class="p">;</span> <span class="c1">// Will be 123 in all examples</span>
        <span class="k">echo</span> <span class="nv">$params</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">??</span> <span class="k">null</span><span class="p">;</span> <span class="c1">// null in first, 456 in second and third example</span>
        <span class="k">echo</span> <span class="nv">$params</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">??</span> <span class="k">null</span><span class="p">;</span> <span class="c1">// null in first and second, 789 in third</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do not put any placeholder after <code class="docutils literal notranslate"><span class="pre">(:any)</span></code>. Because the number of
parameters passed to the controller method may change.</p>
</div>
<p>If matching multiple segments is not the intended behavior, <code class="docutils literal notranslate"><span class="pre">(:segment)</span></code> should be used when defining the
routes. With the examples URLs from above:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:segment)&#39;</span><span class="p">,</span> <span class="s1">&#39;Catalog::productLookup/$1&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>will only match <strong>product/123</strong> and generate 404 errors for other example.</p>
</section>
</section>
<section id="custom-placeholders">
<h4><a class="toc-backref" href="#id27" role="doc-backlink">Custom Placeholders</a><a class="headerlink" href="#custom-placeholders" title="Permalink to this heading"></a></h4>
<p>You can create your own placeholders that can be used in your routes file to fully customize the experience
and readability.</p>
<p>You add new placeholders with the <code class="docutils literal notranslate"><span class="pre">addPlaceholder()</span></code> method. The first parameter is the string to be used as
the placeholder. The second parameter is the Regular Expression pattern it should be replaced with.
This must be called before you add the route:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">addPlaceholder</span><span class="p">(</span><span class="s1">&#39;uuid&#39;</span><span class="p">,</span> <span class="s1">&#39;[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}&#39;</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users/(:uuid)&#39;</span><span class="p">,</span> <span class="s1">&#39;Users::show/$1&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="regular-expressions">
<h4><a class="toc-backref" href="#id28" role="doc-backlink">Regular Expressions</a><a class="headerlink" href="#regular-expressions" title="Permalink to this heading"></a></h4>
<p>If you prefer you can use regular expressions to define your routing rules. Any valid regular expression
is allowed, as are back-references.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Note: If you use back-references you must use the dollar syntax rather than the double backslash syntax.
A typical RegEx route might look something like this:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;products/([a-z]+)/(\d+)&#39;</span><span class="p">,</span> <span class="s1">&#39;Products::show/$1/id_$2&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>In the above example, a URI similar to <strong>products/shirts/123</strong> would instead call the <code class="docutils literal notranslate"><span class="pre">show()</span></code> method
of the <code class="docutils literal notranslate"><span class="pre">Products</span></code> controller class, with the original first and second segment passed as arguments to it.</p>
<p>With regular expressions, you can also catch a segment containing a forward slash (<code class="docutils literal notranslate"><span class="pre">/</span></code>), which would usually
represent the delimiter between multiple segments.</p>
<p>For example, if a user accesses a password protected area of your web application and you wish to be able to
redirect them back to the same page after they log in, you may find this example useful:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;login/(.+)&#39;</span><span class="p">,</span> <span class="s1">&#39;Auth::login/$1&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>By default, in the above example, if the <code class="docutils literal notranslate"><span class="pre">$1</span></code> placeholder contains a slash
(<code class="docutils literal notranslate"><span class="pre">/</span></code>), it will still be split into multiple parameters when passed to
<code class="docutils literal notranslate"><span class="pre">Auth::login()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since v4.5.0, you can change the behavior with the config option.
See <a class="reference internal" href="#multiple-uri-segments-as-one-parameter"><span class="std std-ref">Multiple URI Segments as One Parameter</span></a> for details.</p>
</div>
<p>For those of you who don’t know regular expressions and want to learn more about them,
<a class="reference external" href="https://www.regular-expressions.info/">regular-expressions.info</a> might be a good starting point.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also mix and match placeholders with regular expressions.</p>
</div>
</section>
</section>
<section id="view-routes">
<span id="id1"></span><h3><a class="toc-backref" href="#id29" role="doc-backlink">View Routes</a><a class="headerlink" href="#view-routes" title="Permalink to this heading"></a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.3.0.</span></p>
</div>
<p>If you just want to render a view out that has no logic associated with it, you can use the <code class="docutils literal notranslate"><span class="pre">view()</span></code> method.
This is always treated as GET request.
This method accepts the name of the view to load as the second parameter.</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Displays the view in /app/Views/pages/about.php</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;about&#39;</span><span class="p">,</span> <span class="s1">&#39;pages/about&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>If you use placeholders within your route, you can access them within the view in a special variable, <code class="docutils literal notranslate"><span class="pre">$segments</span></code>.
They are available as an array, indexed in the order they appear in the route.</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Displays the view in /app/Views/map.php</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;map/(:segment)/(:segment)&#39;</span><span class="p">,</span> <span class="s1">&#39;map&#39;</span><span class="p">);</span>

<span class="c1">// Within the view, you can access the segments with</span>
<span class="c1">// $segments[0] and $segments[1] respectively.</span>
</pre></div>
</div>
</section>
<section id="redirecting-routes">
<span id="id2"></span><h3><a class="toc-backref" href="#id30" role="doc-backlink">Redirecting Routes</a><a class="headerlink" href="#redirecting-routes" title="Permalink to this heading"></a></h3>
<p>Any site that lives long enough is bound to have pages that move. You can specify routes that should redirect
to other routes with the <code class="docutils literal notranslate"><span class="pre">addRedirect()</span></code> method. The first parameter is the URI pattern for the old route. The
second parameter is either the new URI to redirect to, or the name of a named route. The third parameter is
the HTTP status code that should be sent along with the redirect. The default value is <code class="docutils literal notranslate"><span class="pre">302</span></code> which is a temporary
redirect and is recommended in most cases:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users/profile&#39;</span><span class="p">,</span> <span class="s1">&#39;Users::profile&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;as&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;profile&#39;</span><span class="p">]);</span>

<span class="c1">// Redirect to a named route</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">addRedirect</span><span class="p">(</span><span class="s1">&#39;users/about&#39;</span><span class="p">,</span> <span class="s1">&#39;profile&#39;</span><span class="p">);</span>
<span class="c1">// Redirect to a URI</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">addRedirect</span><span class="p">(</span><span class="s1">&#39;users/about&#39;</span><span class="p">,</span> <span class="s1">&#39;users/profile&#39;</span><span class="p">);</span>

<span class="c1">// Redirect with placeholder</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;post/(:num)/comment/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;PostsComments::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;as&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post.comment&#39;</span><span class="p">]);</span>

<span class="c1">// Redirect to a URI</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">addRedirect</span><span class="p">(</span><span class="s1">&#39;article/(:num)/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;post/$1/comment/$2&#39;</span><span class="p">);</span>
<span class="c1">// Redirect to a named route</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">addRedirect</span><span class="p">(</span><span class="s1">&#39;article/(:num)/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;post.comment&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since v4.2.0, <code class="docutils literal notranslate"><span class="pre">addRedirect()</span></code> can use placeholders.</p>
</div>
<p>If a redirect route is matched during a page load, the user will be immediately redirected to the new page before a
controller can be loaded.</p>
</section>
<section id="environment-restrictions">
<h3><a class="toc-backref" href="#id31" role="doc-backlink">Environment Restrictions</a><a class="headerlink" href="#environment-restrictions" title="Permalink to this heading"></a></h3>
<p>You can create a set of routes that will only be viewable in a certain environment. This allows you to create
tools that only the developer can use on their local machines that are not reachable on testing or production servers.
This can be done with the <code class="docutils literal notranslate"><span class="pre">environment()</span></code> method. The first parameter is the name of the environment. Any
routes defined within this closure are only accessible from the given environment:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">environment</span><span class="p">(</span><span class="s1">&#39;development&#39;</span><span class="p">,</span> <span class="k">static</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;builder&#39;</span><span class="p">,</span> <span class="s1">&#39;Tools\Builder::index&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="routes-with-any-http-verbs">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Routes with any HTTP verbs</a><a class="headerlink" href="#routes-with-any-http-verbs" title="Permalink to this heading"></a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This method exists only for backward compatibility. Do not use it
in new projects. Even if you are already using it, we recommend that you use
another, more appropriate method.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While the <code class="docutils literal notranslate"><span class="pre">add()</span></code> method seems to be convenient, it is recommended to always use the HTTP-verb-based
routes, described above, as it is more secure. If you use the <a class="reference internal" href="../libraries/security.html"><span class="doc">CSRF protection</span></a>, it does not protect <strong>GET</strong>
requests. If the URI specified in the <code class="docutils literal notranslate"><span class="pre">add()</span></code> method is accessible by the GET method, the CSRF protection
will not work.</p>
</div>
<p>It is possible to define a route with any HTTP verbs.
You can use the <code class="docutils literal notranslate"><span class="pre">add()</span></code> method:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;products&#39;</span><span class="p">,</span> <span class="s1">&#39;Product::feature&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Using the HTTP-verb-based routes will also provide a slight performance increase, since
only routes that match the current request method are stored, resulting in fewer routes to scan through
when trying to find a match.</p>
</div>
</section>
<section id="mapping-multiple-routes">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Mapping Multiple Routes</a><a class="headerlink" href="#mapping-multiple-routes" title="Permalink to this heading"></a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This method exists only for backward compatibility. Do not use it
in new projects. Even if you are already using it, we recommend that you use
another, more appropriate method.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">map()</span></code> method is not recommended as well as <code class="docutils literal notranslate"><span class="pre">add()</span></code>
because it calls <code class="docutils literal notranslate"><span class="pre">add()</span></code> internally.</p>
</div>
<p>While the <code class="docutils literal notranslate"><span class="pre">add()</span></code> method is simple to use, it is often handier to work with multiple routes at once, using
the <code class="docutils literal notranslate"><span class="pre">map()</span></code> method. Instead of calling the <code class="docutils literal notranslate"><span class="pre">add()</span></code> method for each route that you need to add, you can
define an array of routes and then pass it as the first parameter to the <code class="docutils literal notranslate"><span class="pre">map()</span></code> method:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$multipleRoutes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;product/(:num)&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;Catalog::productLookupById&#39;</span><span class="p">,</span>
    <span class="s1">&#39;product/(:alphanum)&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Catalog::productLookupByName&#39;</span><span class="p">,</span>
<span class="p">];</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">map</span><span class="p">(</span><span class="nv">$multipleRoutes</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="command-line-only-routes">
<span id="id3"></span><h3><a class="toc-backref" href="#id34" role="doc-backlink">Command-Line Only Routes</a><a class="headerlink" href="#command-line-only-routes" title="Permalink to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to use Spark Commands for CLI scripts instead of calling controllers via CLI.
See the <a class="reference internal" href="../cli/cli_commands.html"><span class="doc">Creating Spark Commands</span></a> page for detailed information.</p>
</div>
<p>Any route created by any of the HTTP-verb-based
route methods will also be inaccessible from the CLI, but routes created by the <code class="docutils literal notranslate"><span class="pre">add()</span></code> method will still be
available from the command line.</p>
<p>You can create routes that work only from the command-line, and are inaccessible from the web browser, with the
<code class="docutils literal notranslate"><span class="pre">cli()</span></code> method:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">cli</span><span class="p">(</span><span class="s1">&#39;migrate&#39;</span><span class="p">,</span> <span class="s1">&#39;App\Database::migrate&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you enable <a class="reference internal" href="#auto-routing-legacy"><span class="std std-ref">Auto Routing (Legacy)</span></a> and place the command file in <strong>app/Controllers</strong>,
anyone could access the command with the help of Auto Routing (Legacy) via HTTP.</p>
</div>
</section>
</section>
<section id="global-options">
<h2><a class="toc-backref" href="#id35" role="doc-backlink">Global Options</a><a class="headerlink" href="#global-options" title="Permalink to this heading"></a></h2>
<p>All of the methods for creating a route (<code class="docutils literal notranslate"><span class="pre">get()</span></code>, <code class="docutils literal notranslate"><span class="pre">post()</span></code>, <a class="reference internal" href="restful.html"><span class="doc">resource()</span></a> etc) can take an array of options that
can modify the generated routes, or further restrict them. The <code class="docutils literal notranslate"><span class="pre">$options</span></code> array is always the last parameter:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">put</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">head</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">options</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">patch</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">match</span><span class="p">([</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT&#39;</span><span class="p">],</span> <span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resource</span><span class="p">(</span><span class="s1">&#39;photos&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">map</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nv">$options</span><span class="p">,</span> <span class="k">static</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{});</span>
</pre></div>
</div>
<section id="applying-filters">
<span id="id4"></span><h3><a class="toc-backref" href="#id36" role="doc-backlink">Applying Filters</a><a class="headerlink" href="#applying-filters" title="Permalink to this heading"></a></h3>
<p>You can alter the behavior of specific routes by supplying filters to run before or after the controller. This is especially handy during authentication or api logging.</p>
<p>The value for the filter can be a string or an array of strings:</p>
<ul class="simple">
<li><p>matching the aliases defined in <strong>app/Config/Filters.php</strong>.</p></li>
<li><p>filter classnames</p></li>
</ul>
<p>See <a class="reference internal" href="filters.html#filters-aliases"><span class="std std-ref">Controller Filters</span></a> for more information on defining aliases.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you set filters to routes in <strong>app/Config/Routes.php</strong>
(not in <strong>app/Config/Filters.php</strong>), it is recommended to disable Auto Routing (Legacy).
When <a class="reference internal" href="#auto-routing-legacy"><span class="std std-ref">Auto Routing (Legacy)</span></a> is enabled, it may be possible that a controller can be accessed
via a different URL than the configured route,
in which case the filter you specified to the route will not be applied.
See <a class="reference internal" href="#use-defined-routes-only"><span class="std std-ref">Use Defined Routes Only</span></a> to disable auto-routing.</p>
</div>
<section id="alias-filter">
<h4><a class="toc-backref" href="#id37" role="doc-backlink">Alias Filter</a><a class="headerlink" href="#alias-filter" title="Permalink to this heading"></a></h4>
<p>You specify an alias <a class="reference internal" href="filters.html#filters-aliases"><span class="std std-ref">defined in app/Config/Filters.php</span></a> for the filter value:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39; AdminController::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;admin-auth&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>You may also supply arguments to be passed to the alias filter’s <code class="docutils literal notranslate"><span class="pre">before()</span></code> and <code class="docutils literal notranslate"><span class="pre">after()</span></code> methods:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;users/delete/(:segment)&#39;</span><span class="p">,</span> <span class="s1">&#39;AdminController::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;admin-auth:dual,noreturn&#39;</span><span class="p">]);</span>
</pre></div>
</div>
</section>
<section id="classname-filter">
<h4><a class="toc-backref" href="#id38" role="doc-backlink">Classname Filter</a><a class="headerlink" href="#classname-filter" title="Permalink to this heading"></a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.1.5.</span></p>
</div>
<p>You can specify a filter classname for the filter value:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39; AdminController::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="nx">\App\Filters\SomeFilter</span><span class="o">::</span><span class="na">class</span><span class="p">]);</span>
</pre></div>
</div>
</section>
<section id="multiple-filters">
<span id="id5"></span><h4><a class="toc-backref" href="#id39" role="doc-backlink">Multiple Filters</a><a class="headerlink" href="#multiple-filters" title="Permalink to this heading"></a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.1.5.</span></p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Since v4.5.0, <em>Multiple Filters</em> are always enabled.
Prior to v4.5.0, <em>Multiple Filters</em> were disabled by default.
If you want to use with prior to v4.5.0, See
<a class="reference internal" href="../installation/upgrade_415.html#upgrade-415-multiple-filters-for-a-route"><span class="std std-ref">Upgrading from 4.1.4 to 4.1.5</span></a>
for the details.</p>
</div>
<p>You can specify an array for the filter value:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39; AdminController::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;admin-auth&#39;</span><span class="p">,</span> <span class="nx">\App\Filters\SomeFilter</span><span class="o">::</span><span class="na">class</span><span class="p">]]);</span>
</pre></div>
</div>
<section id="filter-arguments">
<h5>Filter Arguments<a class="headerlink" href="#filter-arguments" title="Permalink to this heading"></a></h5>
<p>Additional arguments may be passed to a filter:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;users/delete/(:segment)&#39;</span><span class="p">,</span> <span class="s1">&#39;AdminController::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;admin-auth:dual,noreturn&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>In this example, the array <code class="docutils literal notranslate"><span class="pre">['dual',</span> <span class="pre">'noreturn']</span></code> will be passed in <code class="docutils literal notranslate"><span class="pre">$arguments</span></code>
to the filter’s <code class="docutils literal notranslate"><span class="pre">before()</span></code> and <code class="docutils literal notranslate"><span class="pre">after()</span></code> implementation methods.</p>
</section>
</section>
</section>
<section id="assigning-namespace">
<span id="id6"></span><h3><a class="toc-backref" href="#id40" role="doc-backlink">Assigning Namespace</a><a class="headerlink" href="#assigning-namespace" title="Permalink to this heading"></a></h3>
<p>While a <a class="reference internal" href="#routing-default-namespace"><span class="std std-ref">Default Namespace</span></a> will be prepended to the generated controllers, you can also specify
a different namespace to be used in any options array, with the <code class="docutils literal notranslate"><span class="pre">namespace</span></code> option. The value should be the
namespace you want modified:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Routes to \Admin\Users::index()</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;admin/users&#39;</span><span class="p">,</span> <span class="s1">&#39;Users::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;namespace&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Admin&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>The new namespace is only applied during that call for any methods that create a single route, like get, post, etc.
For any methods that create multiple routes, the new namespace is attached to all routes generated by that function
or, in the case of <code class="docutils literal notranslate"><span class="pre">group()</span></code>, all routes generated while in the closure.</p>
</section>
<section id="limit-to-hostname">
<h3><a class="toc-backref" href="#id41" role="doc-backlink">Limit to Hostname</a><a class="headerlink" href="#limit-to-hostname" title="Permalink to this heading"></a></h3>
<p>You can restrict groups of routes to function only in certain domain or sub-domains of your application
by passing the “hostname” option along with the desired domain to allow it on as part of the options array:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;hostname&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;accounts.example.com&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>This example would only allow the specified hosts to work if the domain exactly matched <strong>accounts.example.com</strong>.
It would not work under the main site at <strong>example.com</strong>.</p>
</section>
<section id="limit-to-subdomains">
<h3><a class="toc-backref" href="#id42" role="doc-backlink">Limit to Subdomains</a><a class="headerlink" href="#limit-to-subdomains" title="Permalink to this heading"></a></h3>
<p>When the <code class="docutils literal notranslate"><span class="pre">subdomain</span></code> option is present, the system will restrict the routes to only be available on that
sub-domain. The route will only be matched if the subdomain is the one the application is being viewed through:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Limit to media.example.com</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;subdomain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;media&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>You can restrict it to any subdomain by setting the value to an asterisk, (<code class="docutils literal notranslate"><span class="pre">*</span></code>). If you are viewing from a URL
that does not have any subdomain present, this will not be matched:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Limit to any sub-domain</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;subdomain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;*&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The system is not perfect and should be tested for your specific domain before being used in production.
Most domains should work fine but some edge case ones, especially with a period in the domain itself (not used
to separate suffixes or www) can potentially lead to false positives.</p>
</div>
</section>
<section id="offsetting-the-matched-parameters">
<h3><a class="toc-backref" href="#id43" role="doc-backlink">Offsetting the Matched Parameters</a><a class="headerlink" href="#offsetting-the-matched-parameters" title="Permalink to this heading"></a></h3>
<p>You can offset the matched parameters in your route by any numeric value with the <code class="docutils literal notranslate"><span class="pre">offset</span></code> option, with the
value being the number of segments to offset.</p>
<p>This can be beneficial when developing APIs with the first URI segment being the version number. It can also
be used when the first parameter is a language string:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;users/show/$1&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;offset&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>

<span class="c1">// Creates:</span>
<span class="nv">$routes</span><span class="p">[</span><span class="s1">&#39;users/(:num)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;users/show/$2&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="reverse-routing">
<span id="id7"></span><h2><a class="toc-backref" href="#id44" role="doc-backlink">Reverse Routing</a><a class="headerlink" href="#reverse-routing" title="Permalink to this heading"></a></h2>
<p>Reverse routing allows you to define the controller and method, as well as any parameters, that a link should go
to, and have the router lookup the current route to it. This allows route definitions to change without you having
to update your application code. This is typically used within views to create links.</p>
<p>For example, if you have a route to a photo gallery that you want to link to, you can use the <a class="reference internal" href="../helpers/url_helper.html#url_to" title="url_to"><code class="xref php php-func docutils literal notranslate"><span class="pre">url_to()</span></code></a> helper
function to get the route that should be used. The first parameter is the fully qualified Controller and method,
separated by a double colon (<code class="docutils literal notranslate"><span class="pre">::</span></code>), much like you would use when writing the initial route itself. Any parameters that
should be passed to the route are passed in next:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// The route is defined as:</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users/(:num)/gallery/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;Galleries::showUserGallery/$1/$2&#39;</span><span class="p">);</span>

<span class="cp">?&gt;</span>

<span class="cm">&lt;!-- Generate the URI to link to user ID 15, gallery 12: --&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">url_to</span><span class="p">(</span><span class="s1">&#39;Galleries::showUserGallery&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">&quot;</span><span class="p">&gt;</span>View Gallery<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- Result: &#39;http://example.com/users/15/gallery/12&#39; --&gt;</span>
</pre></div>
</div>
</section>
<section id="named-routes">
<span id="using-named-routes"></span><h2><a class="toc-backref" href="#id45" role="doc-backlink">Named Routes</a><a class="headerlink" href="#named-routes" title="Permalink to this heading"></a></h2>
<p>You can name routes to make your application less fragile. This applies a name to a route that can be called
later, and even if the route definition changes, all of the links in your application built with <a class="reference internal" href="../helpers/url_helper.html#url_to" title="url_to"><code class="xref php php-func docutils literal notranslate"><span class="pre">url_to()</span></code></a>
will still work without you having to make any changes. A route is named by passing in the <code class="docutils literal notranslate"><span class="pre">as</span></code> option
with the name of the route:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// The route is defined as:</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users/(:num)/gallery/(:num)&#39;</span><span class="p">,</span> <span class="s1">&#39;Galleries::showUserGallery/$1/$2&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;as&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;user_gallery&#39;</span><span class="p">]);</span>

<span class="cp">?&gt;</span>

<span class="cm">&lt;!-- Generate the URI to link to user ID 15, gallery 12: --&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">url_to</span><span class="p">(</span><span class="s1">&#39;user_gallery&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">&quot;</span><span class="p">&gt;</span>View Gallery<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- Result: &#39;http://example.com/users/15/gallery/12&#39; --&gt;</span>
</pre></div>
</div>
<p>This has the added benefit of making the views more readable, too.</p>
</section>
<section id="grouping-routes">
<h2><a class="toc-backref" href="#id46" role="doc-backlink">Grouping Routes</a><a class="headerlink" href="#grouping-routes" title="Permalink to this heading"></a></h2>
<p>You can group your routes under a common name with the <code class="docutils literal notranslate"><span class="pre">group()</span></code> method. The group name becomes a segment that
appears prior to the routes defined inside of the group. This allows you to reduce the typing needed to build out an
extensive set of routes that all share the opening string, like when building an admin area:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="k">static</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin\Users::index&#39;</span><span class="p">);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin\Blog::index&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>This would prefix the <strong>users</strong> and <strong>blog</strong> URIs with <strong>admin</strong>, handling URLs like <strong>admin/users</strong> and <strong>admin/blog</strong>.</p>
<section id="setting-namespace">
<h3><a class="toc-backref" href="#id47" role="doc-backlink">Setting Namespace</a><a class="headerlink" href="#setting-namespace" title="Permalink to this heading"></a></h3>
<p>If you need to assign options to a group, like a <a class="reference internal" href="#assigning-namespace"><span class="std std-ref">Assigning Namespace</span></a>, do it before the callback:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">&#39;api&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;namespace&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;App\API\v1&#39;</span><span class="p">],</span> <span class="k">static</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resource</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>This would handle a resource route to the <code class="docutils literal notranslate"><span class="pre">App\API\v1\Users</span></code> controller with the <strong>api/users</strong> URI.</p>
</section>
<section id="setting-filters">
<h3><a class="toc-backref" href="#id48" role="doc-backlink">Setting Filters</a><a class="headerlink" href="#setting-filters" title="Permalink to this heading"></a></h3>
<p>You can also use a specific <a class="reference internal" href="filters.html"><span class="doc">filter</span></a> for a group of routes. This will always
run the filter before or after the controller. This is especially handy during authentication or api logging:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">&#39;api&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;api-auth&#39;</span><span class="p">],</span> <span class="k">static</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resource</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The value for the filter must match one of the aliases defined within <strong>app/Config/Filters.php</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to v4.5.4, due to a bug, filters passed to the <code class="docutils literal notranslate"><span class="pre">group()</span></code> were
not merged into the filters passed to the inner routes.</p>
</div>
</section>
<section id="setting-other-options">
<h3><a class="toc-backref" href="#id49" role="doc-backlink">Setting Other Options</a><a class="headerlink" href="#setting-other-options" title="Permalink to this heading"></a></h3>
<p>At some point, you may want to group routes for the purpose of applying filters or other route
config options like namespace, subdomain, etc. Without necessarily needing to add a prefix to the group, you can pass
an empty string in place of the prefix and the routes in the group will be routed as though the group never existed but with the
given route config options:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;namespace&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Myth\Auth\Controllers&#39;</span><span class="p">],</span> <span class="k">static</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="s1">&#39;AuthController::login&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;as&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;login&#39;</span><span class="p">]);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="s1">&#39;AuthController::attemptLogin&#39;</span><span class="p">);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;logout&#39;</span><span class="p">,</span> <span class="s1">&#39;AuthController::logout&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="nesting-groups">
<span id="routing-nesting-groups"></span><h3><a class="toc-backref" href="#id50" role="doc-backlink">Nesting Groups</a><a class="headerlink" href="#nesting-groups" title="Permalink to this heading"></a></h3>
<p>It is possible to nest groups within groups for finer organization if you need it:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;myfilter1:config&#39;</span><span class="p">],</span> <span class="k">static</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin\Admin::index&#39;</span><span class="p">);</span>

    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">group</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;filter&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;myfilter2:region&#39;</span><span class="p">],</span> <span class="k">static</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin\Users::list&#39;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>This would handle the URL at <strong>admin/users/list</strong>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">filter</span></code> option passed to the outer <code class="docutils literal notranslate"><span class="pre">group()</span></code> are merged with the inner
<code class="docutils literal notranslate"><span class="pre">group()</span></code> filter option.
The above code runs <code class="docutils literal notranslate"><span class="pre">myfilter1:config</span></code> for the route <code class="docutils literal notranslate"><span class="pre">admin</span></code>, and <code class="docutils literal notranslate"><span class="pre">myfilter1:config</span></code>
and <code class="docutils literal notranslate"><span class="pre">myfilter2:region</span></code> for the route <code class="docutils literal notranslate"><span class="pre">admin/users/list</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The same filter cannot be run multiple times with different arguments.</p>
</div>
<p>Any other overlapping options passed to the inner <code class="docutils literal notranslate"><span class="pre">group()</span></code> will overwrite their values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to v4.5.0, due to a bug, options passed to the outer <code class="docutils literal notranslate"><span class="pre">group()</span></code>
are not merged with the inner <code class="docutils literal notranslate"><span class="pre">group()</span></code> options.</p>
</div>
</section>
</section>
<section id="route-priority">
<span id="routing-priority"></span><h2><a class="toc-backref" href="#id51" role="doc-backlink">Route Priority</a><a class="headerlink" href="#route-priority" title="Permalink to this heading"></a></h2>
<p>Routes are registered in the routing table in the order in which they are defined. This means that when a URI is accessed, the first matching route will be executed.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If a route path is defined more than once with different handlers, only the first defined route is registered.</p>
</div>
<p>You can check registered routes in the routing table by running the <a class="reference internal" href="#routing-spark-routes"><span class="std std-ref">spark routes</span></a> command.</p>
<section id="changing-route-priority">
<h3><a class="toc-backref" href="#id52" role="doc-backlink">Changing Route Priority</a><a class="headerlink" href="#changing-route-priority" title="Permalink to this heading"></a></h3>
<p>When working with modules, it can be a problem if the routes in the application contain wildcards.
Then the module routes will not be processed correctly.
You can solve this problem by lowering the priority of route processing using the <code class="docutils literal notranslate"><span class="pre">priority</span></code> option. The parameter
accepts positive integers and zero. The higher the number specified in the <code class="docutils literal notranslate"><span class="pre">priority</span></code>, the lower
route priority in the processing queue:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// First you need to enable processing of the routes queue by priority.</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setPrioritize</span><span class="p">();</span>

<span class="c1">// Config\Routes</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;(.*)&#39;</span><span class="p">,</span> <span class="s1">&#39;Posts::index&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;priority&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>

<span class="c1">// Modules\Acme\Config\Routes</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin::index&#39;</span><span class="p">);</span>

<span class="c1">// The &quot;admin&quot; route will now be processed before the wildcard route.</span>
</pre></div>
</div>
<p>To disable this functionality, you must call the method with the parameter <code class="docutils literal notranslate"><span class="pre">false</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setPrioritize</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, all routes have a priority of 0.
Negative integers will be cast to the absolute value.</p>
</div>
</section>
</section>
<section id="routes-configuration-options">
<span id="id8"></span><h2><a class="toc-backref" href="#id53" role="doc-backlink">Routes Configuration Options</a><a class="headerlink" href="#routes-configuration-options" title="Permalink to this heading"></a></h2>
<p>The RoutesCollection class provides several options that affect all routes, and can be modified to meet your
application’s needs. These options are available in <strong>app/Config/Routing.php</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The config file <strong>app/Config/Routing.php</strong> has been added since v4.4.0.
In previous versions, the setter methods were used in <strong>app/Config/Routes.php</strong>
to change settings.</p>
</div>
<section id="default-namespace">
<span id="routing-default-namespace"></span><h3><a class="toc-backref" href="#id54" role="doc-backlink">Default Namespace</a><a class="headerlink" href="#default-namespace" title="Permalink to this heading"></a></h3>
<p>When matching a controller to a route, the router will add the default namespace value to the front of the controller
specified by the route. By default, this value is <code class="docutils literal notranslate"><span class="pre">App\Controllers</span></code>.</p>
<p>If you set the value empty string (<code class="docutils literal notranslate"><span class="pre">''</span></code>), it leaves each route to specify the fully namespaced
controller:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// In app/Config/Routing.php</span>
<span class="k">use</span> <span class="nx">CodeIgniter\Config\Routing</span> <span class="k">as</span> <span class="nx">BaseRouting</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Routing</span> <span class="k">extends</span> <span class="nx">BaseRouting</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">public</span> <span class="nx">string</span> <span class="nv">$defaultNamespace</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// In app/Config/Routes.php</span>
<span class="c1">// Controller is \Users</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;Users::index&#39;</span><span class="p">);</span>

<span class="c1">// Controller is \Admin\Users</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin\Users::index&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>If your controllers are not explicitly namespaced, there is no need to change this. If you namespace your controllers,
then you can change this value to save typing:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// This can be overridden in app/Config/Routes.php</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setDefaultNamespace</span><span class="p">(</span><span class="s1">&#39;App&#39;</span><span class="p">);</span>

<span class="c1">// Controller is \App\Users</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;Users::index&#39;</span><span class="p">);</span>

<span class="c1">// Controller is \App\Admin\Users</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;Admin\Users::index&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="default-method">
<span id="routing-default-method"></span><h3><a class="toc-backref" href="#id55" role="doc-backlink">Default Method</a><a class="headerlink" href="#default-method" title="Permalink to this heading"></a></h3>
<p>This setting is used when the route handler only has the controller name and no
method name listed. The default value is <code class="docutils literal notranslate"><span class="pre">index</span></code>.</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="c1">// In app/Config/Routing.php</span>
<span class="k">public</span> <span class="nx">string</span> <span class="nv">$defaultMethod</span> <span class="o">=</span> <span class="s1">&#39;index&#39;</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">$defaultMethod</span></code> is also common with Auto Routing.
See <a class="reference internal" href="#routing-auto-routing-improved-default-method"><span class="std std-ref">Auto Routing (Improved)</span></a>
or <a class="reference internal" href="#routing-auto-routing-legacy-default-method"><span class="std std-ref">Auto Routing (Legacy)</span></a>.</p>
</div>
<p>If you define the following route:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;Home&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>the <code class="docutils literal notranslate"><span class="pre">index()</span></code> method of the <code class="docutils literal notranslate"><span class="pre">App\Controllers\Home</span></code> controller is executed
when the route matches.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Method names beginning with <code class="docutils literal notranslate"><span class="pre">_</span></code> cannot be used as the default method.
However, starting with v4.5.0, <code class="docutils literal notranslate"><span class="pre">__invoke</span></code> method is allowed.</p>
</div>
</section>
<section id="translate-uri-dashes">
<h3><a class="toc-backref" href="#id56" role="doc-backlink">Translate URI Dashes</a><a class="headerlink" href="#translate-uri-dashes" title="Permalink to this heading"></a></h3>
<p>This option enables you to automatically replace dashes (<code class="docutils literal notranslate"><span class="pre">-</span></code>) with underscores in the controller and method
URI segments when used in Auto Routing, thus saving you additional route entries if you need to do that. This is required because the dash isn’t a valid class or method name character and would cause a fatal error if you try to use it:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// In app/Config/Routing.php</span>
<span class="k">use</span> <span class="nx">CodeIgniter\Config\Routing</span> <span class="k">as</span> <span class="nx">BaseRouting</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Routing</span> <span class="k">extends</span> <span class="nx">BaseRouting</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">public</span> <span class="nx">bool</span> <span class="nv">$translateURIDashes</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// This can be overridden in app/Config/Routes.php</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setTranslateURIDashes</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using Auto Routing (Improved), prior to v4.4.0, if
<code class="docutils literal notranslate"><span class="pre">$translateURIDashes</span></code> is true, two URIs correspond to a single controller
method, one URI for dashes (e.g., <strong>foo-bar</strong>) and one URI for underscores
(e.g., <strong>foo_bar</strong>). This was incorrect behavior. Since v4.4.0, the URI for
underscores (<strong>foo_bar</strong>) is not accessible.</p>
</div>
</section>
<section id="use-defined-routes-only">
<span id="id9"></span><h3><a class="toc-backref" href="#id57" role="doc-backlink">Use Defined Routes Only</a><a class="headerlink" href="#use-defined-routes-only" title="Permalink to this heading"></a></h3>
<p>Since v4.2.0, the auto-routing is disabled by default.</p>
<p>When no defined route is found that matches the URI, the system will attempt to match that URI against the
controllers and methods when Auto Routing is enabled.</p>
<p>You can disable this automatic matching, and restrict routes
to only those defined by you, by setting the <code class="docutils literal notranslate"><span class="pre">$autoRoute</span></code> property to false:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// In app/Config/Routing.php</span>
<span class="k">use</span> <span class="nx">CodeIgniter\Config\Routing</span> <span class="k">as</span> <span class="nx">BaseRouting</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Routing</span> <span class="k">extends</span> <span class="nx">BaseRouting</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">public</span> <span class="nx">bool</span> <span class="nv">$autoRoute</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// This can be overridden in app/Config/Routes.php</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setAutoRoute</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use the <a class="reference internal" href="../libraries/security.html"><span class="doc">CSRF protection</span></a>, it does not protect <strong>GET</strong>
requests. If the URI is accessible by the GET method, the CSRF protection will not work.</p>
</div>
</section>
<section id="override">
<span id="id10"></span><h3><a class="toc-backref" href="#id58" role="doc-backlink">404 Override</a><a class="headerlink" href="#override" title="Permalink to this heading"></a></h3>
<p>When a page is not found that matches the current URI, the system will show a
generic 404 view. Using the <code class="docutils literal notranslate"><span class="pre">$override404</span></code> property within the routing config
file, you can define controller class/method for 404 routes.</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// In app/Config/Routing.php</span>
<span class="k">use</span> <span class="nx">CodeIgniter\Config\Routing</span> <span class="k">as</span> <span class="nx">BaseRouting</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Routing</span> <span class="k">extends</span> <span class="nx">BaseRouting</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">public</span> <span class="o">?</span><span class="nx">string</span> <span class="nv">$override404</span> <span class="o">=</span> <span class="s1">&#39;App\Errors::show404&#39;</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also change what happens by specifying an action to happen with the
<code class="docutils literal notranslate"><span class="pre">set404Override()</span></code> method in Routes config file. The value can be either a
valid class/method pair, or a Closure:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// In app/Config/Routes.php</span>
<span class="c1">// Would execute the show404 method of the App\Errors class</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">set404Override</span><span class="p">(</span><span class="s1">&#39;App\Errors::show404&#39;</span><span class="p">);</span>

<span class="c1">// Will display a custom view.</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">set404Override</span><span class="p">(</span><span class="k">static</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// If you want to get the URI segments.</span>
    <span class="nv">$segments</span> <span class="o">=</span> <span class="nx">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getUri</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getSegments</span><span class="p">();</span>

    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;my_errors/not_found.html&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with v4.5.0, the 404 Override feature sets the Response status
code to <code class="docutils literal notranslate"><span class="pre">404</span></code> by default. In previous versions, the code was <code class="docutils literal notranslate"><span class="pre">200</span></code>.
If you want to change the status code in the controller, see
<a class="reference internal" href="../outgoing/response.html#CodeIgniter\HTTP\Response::setStatusCode" title="CodeIgniter\HTTP\Response::setStatusCode"><code class="xref php php-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Response::setStatusCode()</span></code></a> for information on
how to set the status code.</p>
</div>
</section>
<section id="route-processing-by-priority">
<h3><a class="toc-backref" href="#id59" role="doc-backlink">Route Processing by Priority</a><a class="headerlink" href="#route-processing-by-priority" title="Permalink to this heading"></a></h3>
<p>Enables or disables processing of the routes queue by priority. Lowering the priority is defined in the route option.
Disabled by default. This functionality affects all routes.
For an example use of lowering the priority see <a class="reference internal" href="#routing-priority"><span class="std std-ref">Route Priority</span></a>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// In app/Config/Routing.php</span>
<span class="k">use</span> <span class="nx">CodeIgniter\Config\Routing</span> <span class="k">as</span> <span class="nx">BaseRouting</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Routing</span> <span class="k">extends</span> <span class="nx">BaseRouting</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">public</span> <span class="nx">bool</span> <span class="nv">$prioritize</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// In app/Config/Routes.php</span>
<span class="c1">// to enable</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setPrioritize</span><span class="p">();</span>

<span class="c1">// to disable</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setPrioritize</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="multiple-uri-segments-as-one-parameter">
<span id="id11"></span><h3><a class="toc-backref" href="#id60" role="doc-backlink">Multiple URI Segments as One Parameter</a><a class="headerlink" href="#multiple-uri-segments-as-one-parameter" title="Permalink to this heading"></a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.5.0.</span></p>
</div>
<p>When this option is enabled, a placeholder that matches multiple segments, such
as <code class="docutils literal notranslate"><span class="pre">(:any)</span></code>, will be passed directly as it is to one parameter, even if it
contains multiple segments.</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// In app/Config/Routing.php</span>
<span class="k">use</span> <span class="nx">CodeIgniter\Config\Routing</span> <span class="k">as</span> <span class="nx">BaseRouting</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Routing</span> <span class="k">extends</span> <span class="nx">BaseRouting</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">public</span> <span class="nx">bool</span> <span class="nv">$multipleSegmentsOneParam</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For example the route:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;product/(:any)&#39;</span><span class="p">,</span> <span class="s1">&#39;Catalog::productLookup/$1&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>will match <strong>product/123</strong>, <strong>product/123/456</strong>, <strong>product/123/456/789</strong> and so on.
And if the URI is <strong>product/123/456</strong>, <code class="docutils literal notranslate"><span class="pre">123/456</span></code> will be passed to the first
parameter of the <code class="docutils literal notranslate"><span class="pre">Catalog::productLookup()</span></code> method.</p>
</section>
</section>
<section id="auto-routing-improved">
<span id="id12"></span><h2><a class="toc-backref" href="#id61" role="doc-backlink">Auto Routing (Improved)</a><a class="headerlink" href="#auto-routing-improved" title="Permalink to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.2.0.</span></p>
</div>
<p>Since v4.2.0, the new more secure Auto Routing has been introduced.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are familiar with Auto Routing, which was enabled by default
from CodeIgniter 3.x through 4.1.x, you can see the differences in
<a class="reference internal" href="../changelogs/v4.2.0.html#v420-new-improved-auto-routing"><span class="std std-ref">ChangeLog v4.2.0</span></a>.</p>
</div>
<p>When no defined route is found that matches the URI, the system will attempt to match that URI against the controllers and methods when Auto Routing is enabled.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>For security reasons, if a controller is used in the defined routes, Auto Routing (Improved) does not route to the controller.</p>
</div>
<p>Auto Routing can automatically route HTTP requests based on conventions
and execute the corresponding controller methods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auto Routing (Improved) is disabled by default. To use it, see below.</p>
</div>
<section id="enable-auto-routing">
<span id="enabled-auto-routing-improved"></span><h3><a class="toc-backref" href="#id62" role="doc-backlink">Enable Auto Routing</a><a class="headerlink" href="#enable-auto-routing" title="Permalink to this heading"></a></h3>
<p>To use it, you need to change the setting <code class="docutils literal notranslate"><span class="pre">$autoRoute</span></code> option to <code class="docutils literal notranslate"><span class="pre">true</span></code> in <strong>app/Config/Routing.php</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nx">bool</span> <span class="nv">$autoRoute</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</pre></div>
</div>
<p>And you need to change the property <code class="docutils literal notranslate"><span class="pre">$autoRoutesImproved</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> in <strong>app/Config/Feature.php</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nx">bool</span> <span class="nv">$autoRoutesImproved</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="uri-segments">
<h3><a class="toc-backref" href="#id63" role="doc-backlink">URI Segments</a><a class="headerlink" href="#uri-segments" title="Permalink to this heading"></a></h3>
<p>The segments in the URL, in following with the Model-View-Controller approach, usually represent:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">class</span><span class="o">/</span><span class="nx">method</span><span class="o">/</span><span class="nx">ID</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>The first segment represents the controller <strong>class</strong> that should be invoked.</p></li>
<li><p>The second segment represents the class <strong>method</strong> that should be called.</p></li>
<li><p>The third, and any additional segments, represent the ID and any variables that will be passed to the controller.</p></li>
</ol>
<p>Consider this URI:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">helloworld</span><span class="o">/</span><span class="nx">hello</span><span class="o">/</span><span class="mi">1</span>
</pre></div>
</div>
<p>In the above example, when you send an HTTP request with <strong>GET</strong> method,
Auto Routing would attempt to find a controller named <code class="docutils literal notranslate"><span class="pre">App\Controllers\Helloworld</span></code>
and executes <code class="docutils literal notranslate"><span class="pre">getHello()</span></code> method with passing <code class="docutils literal notranslate"><span class="pre">'1'</span></code> as the first argument.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A controller method that will be executed by Auto Routing (Improved) needs HTTP verb (<code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">post</span></code>, <code class="docutils literal notranslate"><span class="pre">put</span></code>, etc.) prefix like <code class="docutils literal notranslate"><span class="pre">getIndex()</span></code>, <code class="docutils literal notranslate"><span class="pre">postCreate()</span></code>.</p>
</div>
<p>See <a class="reference internal" href="controllers.html#controller-auto-routing-improved"><span class="std std-ref">Auto Routing in Controllers</span></a> for more info.</p>
</section>
<section id="configuration-options">
<span id="routing-auto-routing-improved-configuration-options"></span><h3><a class="toc-backref" href="#id64" role="doc-backlink">Configuration Options</a><a class="headerlink" href="#configuration-options" title="Permalink to this heading"></a></h3>
<p>These options are available in the <strong>app/Config/Routing.php</strong> file.</p>
<section id="default-controller">
<h4><a class="toc-backref" href="#id65" role="doc-backlink">Default Controller</a><a class="headerlink" href="#default-controller" title="Permalink to this heading"></a></h4>
<section id="for-site-root-uri">
<h5>For Site Root URI<a class="headerlink" href="#for-site-root-uri" title="Permalink to this heading"></a></h5>
<p>When a user visits the root of your site (i.e., <strong>example.com</strong>) the controller
to use is determined by the value set to the <code class="docutils literal notranslate"><span class="pre">$defaultController</span></code> property,
unless a route exists for it explicitly.</p>
<p>The default value for this is <code class="docutils literal notranslate"><span class="pre">Home</span></code> which matches the controller at
<strong>app/Controllers/Home.php</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nx">string</span> <span class="nv">$defaultController</span> <span class="o">=</span> <span class="s1">&#39;Home&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="for-directory-uri">
<h5>For Directory URI<a class="headerlink" href="#for-directory-uri" title="Permalink to this heading"></a></h5>
<p>The default controller is also used when no matching route has been found, and the URI would point to a directory
in the controllers directory. For example, if the user visits <strong>example.com/admin</strong>, if a controller was found at
<strong>app/Controllers/Admin/Home.php</strong>, it would be used.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You cannot access the default controller with the URI of the controller name.
When the default controller is <code class="docutils literal notranslate"><span class="pre">Home</span></code>, you can access <strong>example.com/</strong>, but if you access <strong>example.com/home</strong>, it will be not found.</p>
</div>
<p>See <a class="reference internal" href="controllers.html#controller-auto-routing-improved"><span class="std std-ref">Auto Routing in Controllers</span></a> for more info.</p>
</section>
</section>
<section id="routing-auto-routing-improved-default-method">
<span id="id13"></span><h4><a class="toc-backref" href="#id66" role="doc-backlink">Default Method</a><a class="headerlink" href="#routing-auto-routing-improved-default-method" title="Permalink to this heading"></a></h4>
<p>This works similar to the default controller setting, but is used to determine the default method that is used
when a controller is found that matches the URI, but no segment exists for the method. The default value is
<code class="docutils literal notranslate"><span class="pre">index</span></code>.</p>
<p>In this example, if the user were to visit <strong>example.com/products</strong>, and a <code class="docutils literal notranslate"><span class="pre">Products</span></code>
controller existed, the <code class="docutils literal notranslate"><span class="pre">Products::getListAll()</span></code> method would be executed:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nx">string</span> <span class="nv">$defaultMethod</span> <span class="o">=</span> <span class="s1">&#39;listAll&#39;</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You cannot access the controller with the URI of the default method name.
In the example above, you can access <strong>example.com/products</strong>, but if you access <strong>example.com/products/listall</strong>, it will be not found.</p>
</div>
</section>
</section>
<section id="module-routing">
<span id="auto-routing-improved-module-routing"></span><h3><a class="toc-backref" href="#id67" role="doc-backlink">Module Routing</a><a class="headerlink" href="#module-routing" title="Permalink to this heading"></a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.4.0.</span></p>
</div>
<p>You can use auto routing even if you use <a class="reference internal" href="../general/modules.html"><span class="doc">Code Modules</span></a> and place
the controllers in a different namespace.</p>
<p>To route to a module, the <code class="docutils literal notranslate"><span class="pre">$moduleRoutes</span></code> property in <strong>app/Config/Routing.php</strong>
must be set:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">array</span> <span class="nv">$moduleRoutes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;blog&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Acme\Blog\Controllers&#39;</span><span class="p">,</span>
<span class="p">];</span>
</pre></div>
</div>
<p>The key is the first URI segment for the module, and the value is the controller
namespace. In the above configuration, <strong>http://localhost:8080/blog/foo/bar</strong>
will be routed to <code class="docutils literal notranslate"><span class="pre">Acme\Blog\Controllers\Foo::getBar()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you define <code class="docutils literal notranslate"><span class="pre">$moduleRoutes</span></code>, the routing for the module takes
precedence. In the above example, even if you have the <code class="docutils literal notranslate"><span class="pre">App\Controllers\Blog</span></code>
controller, <strong>http://localhost:8080/blog</strong> will be routed to the default
controller <code class="docutils literal notranslate"><span class="pre">Acme\Blog\Controllers\Home</span></code>.</p>
</div>
</section>
</section>
<section id="auto-routing-legacy">
<span id="id14"></span><h2><a class="toc-backref" href="#id68" role="doc-backlink">Auto Routing (Legacy)</a><a class="headerlink" href="#auto-routing-legacy" title="Permalink to this heading"></a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This feature exists only for backward compatibility. Do not use it
in new projects. Even if you are already using it, we recommend that you use
the <a class="reference internal" href="#auto-routing-improved"><span class="std std-ref">Auto Routing (Improved)</span></a> instead.</p>
</div>
<p>Auto Routing (Legacy) is a routing system from CodeIgniter 3.
It can automatically route HTTP requests based on conventions and execute the corresponding controller methods.</p>
<p>It is recommended that all routes are defined in the <strong>app/Config/Routes.php</strong> file,
or to use <a class="reference internal" href="#auto-routing-improved"><span class="std std-ref">Auto Routing (Improved)</span></a>,</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To prevent misconfiguration and miscoding, we recommend that you do not use
Auto Routing (Legacy) feature. It is easy to create vulnerable apps where controller filters
or CSRF protection are bypassed.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Auto Routing (Legacy) routes an HTTP request with <strong>any</strong> HTTP method to a controller method.</p>
</div>
<section id="enable-auto-routing-legacy">
<h3><a class="toc-backref" href="#id69" role="doc-backlink">Enable Auto Routing (Legacy)</a><a class="headerlink" href="#enable-auto-routing-legacy" title="Permalink to this heading"></a></h3>
<p>Since v4.2.0, the auto-routing is disabled by default.</p>
<p>To use it, you need to change the setting <code class="docutils literal notranslate"><span class="pre">$autoRoute</span></code> option to <code class="docutils literal notranslate"><span class="pre">true</span></code> in <strong>app/Config/Routing.php</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nx">bool</span> <span class="nv">$autoRoute</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</pre></div>
</div>
<p>And set the property <code class="docutils literal notranslate"><span class="pre">$autoRoutesImproved</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> in <strong>app/Config/Feature.php</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nx">bool</span> <span class="nv">$autoRoutesImproved</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="uri-segments-legacy">
<h3><a class="toc-backref" href="#id70" role="doc-backlink">URI Segments (Legacy)</a><a class="headerlink" href="#uri-segments-legacy" title="Permalink to this heading"></a></h3>
<p>The segments in the URL, in following with the Model-View-Controller approach, usually represent:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">class</span><span class="o">/</span><span class="nx">method</span><span class="o">/</span><span class="nx">ID</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>The first segment represents the controller <strong>class</strong> that should be invoked.</p></li>
<li><p>The second segment represents the class <strong>method</strong> that should be called.</p></li>
<li><p>The third, and any additional segments, represent the ID and any variables that will be passed to the controller.</p></li>
</ol>
<p>Consider this URI:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">helloworld</span><span class="o">/</span><span class="nx">index</span><span class="o">/</span><span class="mi">1</span>
</pre></div>
</div>
<p>In the above example, CodeIgniter would attempt to find a controller named <strong>Helloworld.php</strong>
and executes <code class="docutils literal notranslate"><span class="pre">index()</span></code> method with passing <code class="docutils literal notranslate"><span class="pre">'1'</span></code> as the first argument.</p>
<p>See <a class="reference internal" href="controllers.html#controller-auto-routing-legacy"><span class="std std-ref">Auto Routing (Legacy) in Controllers</span></a> for more info.</p>
</section>
<section id="configuration-options-legacy">
<span id="routing-auto-routing-legacy-configuration-options"></span><h3><a class="toc-backref" href="#id71" role="doc-backlink">Configuration Options (Legacy)</a><a class="headerlink" href="#configuration-options-legacy" title="Permalink to this heading"></a></h3>
<p>These options are available in the <strong>app/Config/Routing.php</strong> file.</p>
<section id="default-controller-legacy">
<h4><a class="toc-backref" href="#id72" role="doc-backlink">Default Controller (Legacy)</a><a class="headerlink" href="#default-controller-legacy" title="Permalink to this heading"></a></h4>
<section id="for-site-root-uri-legacy">
<h5>For Site Root URI (Legacy)<a class="headerlink" href="#for-site-root-uri-legacy" title="Permalink to this heading"></a></h5>
<p>When a user visits the root of your site (i.e., <strong>example.com</strong>) the controller
to use is determined by the value set to the <code class="docutils literal notranslate"><span class="pre">$defaultController</span></code> property,
unless a route exists for it explicitly.</p>
<p>The default value for this is <code class="docutils literal notranslate"><span class="pre">Home</span></code> which matches the controller at
<strong>app/Controllers/Home.php</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nx">string</span> <span class="nv">$defaultController</span> <span class="o">=</span> <span class="s1">&#39;Home&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="for-directory-uri-legacy">
<h5>For Directory URI (Legacy)<a class="headerlink" href="#for-directory-uri-legacy" title="Permalink to this heading"></a></h5>
<p>The default controller is also used when no matching route has been found, and the URI would point to a directory
in the controllers directory. For example, if the user visits <strong>example.com/admin</strong>, if a controller was found at
<strong>app/Controllers/Admin/Home.php</strong>, it would be used.</p>
<p>See <a class="reference internal" href="controllers.html#controller-auto-routing-legacy"><span class="std std-ref">Auto Routing (Legacy) in Controllers</span></a> for more info.</p>
</section>
</section>
<section id="default-method-legacy">
<span id="routing-auto-routing-legacy-default-method"></span><h4><a class="toc-backref" href="#id73" role="doc-backlink">Default Method (Legacy)</a><a class="headerlink" href="#default-method-legacy" title="Permalink to this heading"></a></h4>
<p>This works similar to the default controller setting, but is used to determine the default method that is used
when a controller is found that matches the URI, but no segment exists for the method. The default value is
<code class="docutils literal notranslate"><span class="pre">index</span></code>.</p>
<p>In this example, if the user were to visit <strong>example.com/products</strong>, and a <code class="docutils literal notranslate"><span class="pre">Products</span></code>
controller existed, the <code class="docutils literal notranslate"><span class="pre">Products::listAll()</span></code> method would be executed:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nx">string</span> <span class="nv">$defaultMethod</span> <span class="o">=</span> <span class="s1">&#39;listAll&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="confirming-routes">
<h2><a class="toc-backref" href="#id74" role="doc-backlink">Confirming Routes</a><a class="headerlink" href="#confirming-routes" title="Permalink to this heading"></a></h2>
<p>CodeIgniter has the following <a class="reference internal" href="../cli/spark_commands.html"><span class="doc">command</span></a> to display all routes.</p>
<section id="spark-routes">
<span id="routing-spark-routes"></span><h3><a class="toc-backref" href="#id75" role="doc-backlink">spark routes</a><a class="headerlink" href="#spark-routes" title="Permalink to this heading"></a></h3>
<p>Displays all routes and filters:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php spark routes</span>
</pre></div>
</div>
<p>The output is like the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+---------+---------+---------------+-------------------------------+----------------+---------------+
| Method  | Route   | Name          | Handler                       | Before Filters | After Filters |
+---------+---------+---------------+-------------------------------+----------------+---------------+
| GET     | /       | »             | \App\Controllers\Home::index  |                | toolbar       |
| GET     | feed    | »             | (Closure)                     |                | toolbar       |
+---------+---------+---------------+-------------------------------+----------------+---------------+
</pre></div>
</div>
<p>The <em>Method</em> column shows the HTTP method that the route is listening for.</p>
<p>The <em>Route</em> column shows the route path to match. The route of a defined route is expressed as a regular expression.</p>
<p>Since v4.3.0, the <em>Name</em> column shows the route name. <code class="docutils literal notranslate"><span class="pre">»</span></code> indicates the name is the same as the route path.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The system is not perfect.
For routes containing regular expression patterns like <code class="docutils literal notranslate"><span class="pre">([^/]+)</span></code> or <code class="docutils literal notranslate"><span class="pre">{locale}</span></code>,
the <em>Filters</em> displayed might not be correct (if you set complicated URI pattern
for the filters in <strong>app/Config/Filters.php</strong>), or it is displayed as <code class="docutils literal notranslate"><span class="pre">&lt;unknown&gt;</span></code>.</p>
<p>The <a class="reference internal" href="filters.html#spark-filter-check"><span class="std std-ref">spark filter:check</span></a> command can be used to check
for 100% accurate filters.</p>
</div>
<section id="id15">
<h4><a class="toc-backref" href="#id76" role="doc-backlink">Auto Routing (Improved)</a><a class="headerlink" href="#id15" title="Permalink to this heading"></a></h4>
<p>When you use Auto Routing (Improved), the output is like the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+-----------+-------------------------+---------------+-----------------------------------+----------------+---------------+
| Method    | Route                   | Name          | Handler                           | Before Filters | After Filters |
+-----------+-------------------------+---------------+-----------------------------------+----------------+---------------+
| GET(auto) | product/list/../..[/..] |               | \App\Controllers\Product::getList |                | toolbar       |
+-----------+-------------------------+---------------+-----------------------------------+----------------+---------------+
</pre></div>
</div>
<p>The <em>Method</em> will be like <code class="docutils literal notranslate"><span class="pre">GET(auto)</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">/..</span></code> in the <em>Route</em> column indicates one segment. <code class="docutils literal notranslate"><span class="pre">[/..]</span></code> indicates it is optional.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When auto-routing is enabled and you have the route <code class="docutils literal notranslate"><span class="pre">home</span></code>, it can be also accessed by <code class="docutils literal notranslate"><span class="pre">Home</span></code>, or maybe by <code class="docutils literal notranslate"><span class="pre">hOme</span></code>, <code class="docutils literal notranslate"><span class="pre">hoMe</span></code>, <code class="docutils literal notranslate"><span class="pre">HOME</span></code>, etc. but the command will show only <code class="docutils literal notranslate"><span class="pre">home</span></code>.</p>
</div>
<p>If you see a route starting with <code class="docutils literal notranslate"><span class="pre">x</span></code> like the following, it indicates an invalid
route that won’t be routed, but the controller has a public method for routing.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+-----------+----------------+------+-------------------------------------+----------------+---------------+
| Method    | Route          | Name | Handler                             | Before Filters | After Filters |
+-----------+----------------+------+-------------------------------------+----------------+---------------+
| GET(auto) | x home/foo     |      | \App\Controllers\Home::getFoo       | &lt;unknown&gt;      | &lt;unknown&gt;     |
+-----------+----------------+------+-------------------------------------+----------------+---------------+
</pre></div>
</div>
<p>The above example shows you have the <code class="docutils literal notranslate"><span class="pre">\App\Controllers\Home::getFoo()</span></code> method,
but it is not routed because it is the default controller (<code class="docutils literal notranslate"><span class="pre">Home</span></code> by default)
and the default controller name must be omitted in the URI. You should delete
the <code class="docutils literal notranslate"><span class="pre">getFoo()</span></code> method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to v4.3.4, the invalid route is displayed as a normal route
due to a bug.</p>
</div>
</section>
<section id="id16">
<h4><a class="toc-backref" href="#id77" role="doc-backlink">Auto Routing (Legacy)</a><a class="headerlink" href="#id16" title="Permalink to this heading"></a></h4>
<p>When you use Auto Routing (Legacy), the output is like the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+--------+--------------------+---------------+-----------------------------------+----------------+---------------+
| Method | Route              | Name          | Handler                           | Before Filters | After Filters |
+--------+--------------------+---------------+-----------------------------------+----------------+---------------+
| auto   | product/list[/...] |               | \App\Controllers\Product::getList |                | toolbar       |
+--------+--------------------+---------------+-----------------------------------+----------------+---------------+
</pre></div>
</div>
<p>The <em>Method</em> will be <code class="docutils literal notranslate"><span class="pre">auto</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">[/...]</span></code> in the <em>Route</em> column indicates any number of segments.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When auto-routing is enabled and you have the route <code class="docutils literal notranslate"><span class="pre">home</span></code>, it can be also accessed by <code class="docutils literal notranslate"><span class="pre">Home</span></code>, or maybe by <code class="docutils literal notranslate"><span class="pre">hOme</span></code>, <code class="docutils literal notranslate"><span class="pre">hoMe</span></code>, <code class="docutils literal notranslate"><span class="pre">HOME</span></code>, etc. but the command will show only <code class="docutils literal notranslate"><span class="pre">home</span></code>.</p>
</div>
</section>
<section id="sort-by-handler">
<span id="routing-spark-routes-sort-by-handler"></span><h4><a class="toc-backref" href="#id78" role="doc-backlink">Sort by Handler</a><a class="headerlink" href="#sort-by-handler" title="Permalink to this heading"></a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.3.0.</span></p>
</div>
<p>You can sort the routes by <em>Handler</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php spark routes -h</span>
</pre></div>
</div>
</section>
<section id="specify-host">
<span id="routing-spark-routes-specify-host"></span><h4><a class="toc-backref" href="#id79" role="doc-backlink">Specify Host</a><a class="headerlink" href="#specify-host" title="Permalink to this heading"></a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.4.0.</span></p>
</div>
<p>You can specify the host in the request URL with the <code class="docutils literal notranslate"><span class="pre">--host</span></code> option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php spark routes --host accounts.example.com</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="getting-routing-information">
<h2><a class="toc-backref" href="#id80" role="doc-backlink">Getting Routing Information</a><a class="headerlink" href="#getting-routing-information" title="Permalink to this heading"></a></h2>
<p>In CodeIgniter 4, understanding and managing routing information is crucial for handling HTTP requests effectively.
This involves retrieving details about the active controller and method, as well as the filters applied to a specific route.
Below, we explore how to access this routing information to assist in tasks such as logging, debugging, or implementing conditional logic.</p>
<section id="retrieving-the-current-controller-method-names">
<h3><a class="toc-backref" href="#id81" role="doc-backlink">Retrieving the Current Controller/Method Names</a><a class="headerlink" href="#retrieving-the-current-controller-method-names" title="Permalink to this heading"></a></h3>
<p>In some cases, you might need to determine which controller and method have been triggered by the current HTTP request.
This can be useful for logging, debugging, or conditional logic based on the active controller method.</p>
<p>CodeIgniter 4 provides a simple way to access the current route’s controller and method names using the <code class="docutils literal notranslate"><span class="pre">Router</span></code> class. Here is an example:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Get the router instance.</span>
<span class="sd">/** @var \CodeIgniter\Router\Router $router */</span>
<span class="nv">$router</span> <span class="o">=</span> <span class="nx">service</span><span class="p">(</span><span class="s1">&#39;router&#39;</span><span class="p">);</span>

<span class="c1">// Retrieve the fully qualified class name of the controller handling the current request.</span>
<span class="nv">$controller</span> <span class="o">=</span> <span class="nv">$router</span><span class="o">-&gt;</span><span class="na">controllerName</span><span class="p">();</span>

<span class="c1">// Retrieve the method name being executed in the controller for the current request.</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="nv">$router</span><span class="o">-&gt;</span><span class="na">methodName</span><span class="p">();</span>

<span class="k">echo</span> <span class="s1">&#39;Current Controller: &#39;</span> <span class="o">.</span> <span class="nv">$controller</span> <span class="o">.</span> <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">&#39;Current Method: &#39;</span> <span class="o">.</span> <span class="nv">$method</span><span class="p">;</span>
</pre></div>
</div>
<p>This functionality is particularly useful when you need to dynamically interact with your controller or log which method is handling a particular request.</p>
</section>
<section id="getting-active-filters-for-the-current-route">
<h3><a class="toc-backref" href="#id82" role="doc-backlink">Getting Active Filters for the Current Route</a><a class="headerlink" href="#getting-active-filters-for-the-current-route" title="Permalink to this heading"></a></h3>
<p><a class="reference internal" href="filters.html"><span class="doc">Filters</span></a> are a powerful feature that enables you to perform operations such as authentication, logging, and security checks before or after processing HTTP requests.
To access the active filters for a specific route, you can use the <code class="xref php php-meth docutils literal notranslate"><span class="pre">CodeIgniter\Router\Router::getFilters()</span></code> method from the <code class="docutils literal notranslate"><span class="pre">Router</span></code> class.</p>
<p>This method returns a list of filters that are currently active for the route being processed:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Get the router instance.</span>
<span class="sd">/** @var \CodeIgniter\Router\Router $router */</span>
<span class="nv">$router</span>  <span class="o">=</span> <span class="nx">service</span><span class="p">(</span><span class="s1">&#39;router&#39;</span><span class="p">);</span>
<span class="nv">$filters</span> <span class="o">=</span> <span class="nv">$router</span><span class="o">-&gt;</span><span class="na">getFilters</span><span class="p">();</span>

<span class="k">echo</span> <span class="s1">&#39;Active Filters for the Route: &#39;</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="nv">$filters</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">getFilters()</span></code> method returns only the filters defined for the specific route.
It does not include global filters or those specified in the <strong>app/Config/Filters.php</strong> file.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Controllers and Routing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="controllers.html" class="btn btn-neutral float-right" title="Controllers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2024 CodeIgniter Foundation.
      <span class="lastupdated">Last updated on Dec 16, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>